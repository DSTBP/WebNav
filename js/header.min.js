function dark(){document.body.classList.add("night"),document.cookie="night=1;path=/",document.getElementById("fk_service_text").innerHTML="切换日间模式",iziToast.info({timeout:4e3,icon:"Fontawesome",closeOnEscape:"true",transitionOut:"fadeOutRight",displayMode:"replace",layout:"2",transitionIn:"bounceInLeft",position:"topRight",icon:"fa-solid fa-moon",backgroundColor:"#fff",title:"夜间模式切换",message:"已切换为夜间模式"})}function light(){document.body.classList.remove("night"),document.cookie="night=0;path=/",document.getElementById("fk_service_text").innerHTML="切换夜间模式",iziToast.info({timeout:4e3,icon:"Fontawesome",closeOnEscape:"true",transitionOut:"fadeOutRight",displayMode:"replace",layout:"2",transitionIn:"bounceInLeft",position:"topRight",icon:"fa-solid fa-sun",backgroundColor:"#fff",title:"日间模式切换",message:"已切换为日间模式"})}function switchNightMode(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/,"$1")||"0";"0"==t?dark():light()}window.addEventListener("load",function(){$("#loading-box").fadeOut()},!1),window.onscroll=function(){document.documentElement.scrollTop+document.body.scrollTop>100?$("#topup").css({display:"block",transform:"translateX(0px)",transition:"0.3s"}):$("#topup").css({transform:"translateX(60px)",transition:"0.3s"})},window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{t.matches?dark():light()});

// 页面加载动画
window.addEventListener("load",function(){
    $("#loading-box").fadeOut();
    
    // 添加页面加载动画
    document.body.classList.add('page-load-animation');
    
    // 为侧边栏菜单项添加延迟动画
    const menuItems = document.querySelectorAll('.sidebar-menu .main-menu > li');
    menuItems.forEach((item, index) => {
        item.style.animationDelay = `${index * 0.1}s`;
        item.classList.add('animate-fadeInLeft');
    });
    
    // 为顶部导航项添加延迟动画
    const navItems = document.querySelectorAll('.menu-item');
    navItems.forEach((item, index) => {
        item.style.animationDelay = `${index * 0.1}s`;
        item.classList.add('animate-fadeInRight');
    });
    
    // 为搜索框添加动画
    const searchBox = document.getElementById('search');
    if (searchBox) {
        searchBox.classList.add('animate-fadeInUp');
    }
    
    // 为内容卡片添加动画
    const contentCards = document.querySelectorAll('.box2');
    contentCards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.3}s`;
        card.classList.add('animate-scaleIn');
    });
},false);

// 滚动动画
window.onscroll=function(){
    // 回到顶部按钮动画
    if(document.documentElement.scrollTop+document.body.scrollTop>100){
        $("#topup").css({
            display:"block",
            transform:"translateX(0px)",
            transition:"0.3s"
        });
    }else{
        $("#topup").css({
            transform:"translateX(60px)",
            transition:"0.3s"
        });
    }
    
    // 滚动显示动画
    const scrollRevealElements = document.querySelectorAll('.scroll-reveal');
    scrollRevealElements.forEach(element => {
        const elementTop = element.getBoundingClientRect().top;
        const elementVisible = 150;
        
        if (elementTop < window.innerHeight - elementVisible) {
            element.classList.add('revealed');
        }
    });
    
    // 导航栏滚动效果
    const navbar = document.getElementById('navbar');
    if (navbar) {
        if (window.scrollY > 50) {
            navbar.style.background = 'rgba(255, 255, 255, 0.95)';
            navbar.style.backdropFilter = 'blur(15px)';
            navbar.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.1)';
        } else {
            navbar.style.background = 'linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.9) 100%)';
            navbar.style.backdropFilter = 'blur(10px)';
            navbar.style.boxShadow = '0 4px 20px rgba(0,0,0,0.1)';
        }
    }
};

// 系统主题偏好监听
window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{
    t.matches?dark():light();
});

// 增强的交互效果
document.addEventListener('DOMContentLoaded', function() {
    // 为菜单项添加点击波纹效果
    const menuItems = document.querySelectorAll('.sidebar-menu .main-menu a, .menu-item a');
    menuItems.forEach(item => {
        item.addEventListener('click', function(e) {
            const ripple = document.createElement('span');
            const rect = this.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = e.clientX - rect.left - size / 2;
            const y = e.clientY - rect.top - size / 2;
            
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.add('ripple');
            
            this.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        });
    });
    
    // 搜索框焦点效果
    const searchInput = document.getElementById('search-text');
    if (searchInput) {
        searchInput.addEventListener('focus', function() {
            this.parentElement.classList.add('search-focused');
        });
        
        searchInput.addEventListener('blur', function() {
            this.parentElement.classList.remove('search-focused');
        });
    }
    
    // 卡片悬停效果增强
    const cards = document.querySelectorAll('.box2');
    cards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-8px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });
    
    // Logo悬停效果
    const logo = document.querySelector('.logo-env');
    if (logo) {
        logo.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-2px) scale(1.02)';
        });
        
        logo.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    }
});

// 添加CSS样式用于波纹效果
const style = document.createElement('style');
style.textContent = `
    .ripple {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.6);
        transform: scale(0);
        animation: ripple-animation 0.6s linear;
        pointer-events: none;
    }
    
    @keyframes ripple-animation {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }
    
    .search-focused {
        transform: scale(1.02);
    }
    
    .search-focused #search-text {
        box-shadow: 0 12px 40px rgba(102, 126, 234, 0.3);
    }
`;
document.head.appendChild(style);